<!-- Vererbung -->
{% extends './_base_dokab.html' %}

<!-- Titel -->
{% block titel %}
    Übersicht Ordnerinhalt
{% endblock titel %}

<!-- nav-tab aktiv -->
{% block ordner_active %}
    active
{% endblock ordner_active %}

<!-- Seiteninhalt -->
{% block inhalt %}

<!-- BUTTONLEISTE DOKAB INHALTSANSICHT -->
<nav class="navbar border-bottom">
    <div class="ml-auto mr-0">
        <button class="btn btn-outline-primary">Download</button>
        {% if aktueller_ordner.freigabe_upload %}
            <a class="btn btn-outline-success" role="button" href="{% url 'projektadmin:upload_dokument' projekt.id aktueller_ordner.id %}">Upload</a>
        {% endif %}
    </div>
</nav>

<div class="d-flex bd-highlight">

    <!--NAVIGATIONSMENÜ ORDNERBAUM-->
    <div class="pl-2 pt-2 pr-5 bd-highlight border-right">
        {% for ordner in liste_ordnerbaum %}
            <p>
                {% if ordner.freigabe_lesen or ordner.freigabe_upload %}
                <a href="{% url 'projektadmin:übersicht_ordnerinhalt' projekt.id ordner.id %}">{{ordner.darstellung}}{{ordner.bezeichnung}}</a>
                {% else %}
                {{ordner.bezeichnung}}
                {% endif %}
            </p>
        {% endfor %}
    </div>

    <!-- HAUPTFENSTER ORDNERINHALT -->
    <div class="flex-grow-1 bd-highlight">
        
            <h1 class="mb-5 text-center">Ordnerinhalt {{aktueller_ordner.bezeichnung}}</h1>

            <!-- AUFLISTUNG UNTERORDNER (WENN VHD)-->
            {% if liste_unterordner %}
                <h2 class="my-2 text-center">Unterordner</h2>

                <table class="table border-bottom">
                    <thead>
                        <tr>
                            <th>Bezeichnung</th>
                            <th></th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for unterordner in liste_unterordner %}
                        <tr>
                            
                            <td>
                                {% if unterordner.freigabe_lesen or unterordner.freigabe_upload %}
                                <a href="{% url 'projektadmin:übersicht_ordnerinhalt' projekt.id unterordner.id %}">{{unterordner.bezeichnung}}</a>
                                {% else %}
                                {{unterordner.bezeichnung}}
                                {% endif %}
                            </td>
                            <td></td>
                            <td></td>

                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% endif %}

            
            <!-- AUFLISTUNG FREIGEGEBENE DOKUMENTE (WENN VHD) -->
            {% if liste_dokumente_freigegeben %}
                <h2 class="my-2 text-center">Freigegebene Dokumente</h2>
                
                <table class="table">
                    <thead>
                        <tr>
                            <th>Bezeichnung</th>
                            <th>Datum</th>
                            <th>Erstellt von</th>
                        </tr>
                    </thead>
                    
                    <tbody>
                        <!-- Auflistung Freigegebene Dokumente -->
                        {% for dokument_f in liste_dokumente_freigegeben %}
                        <tr>
                            <td>FURZ</td>
                            <td></td>
                            <td></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% endif %}

            <!-- AUFLISTUNG EIGENE DOKUMENTE (WENN VHD) -->
            {% if liste_dokumente_mitarbeiter %}
                <h2 class="my-2 text-center">Eigene Dokumente</h2>

                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">Bezeichnung</th>
                            <th scope="col">Datum</th>
                            <th scope="col">Freigabestatus</th>
                        </tr>
                    </thead>

                    <tbody>
                        {% for dokument_m in liste_dokumente_mitarbeiter %}
                        <tr>
                            <td>
                                <a href="{% url 'projektadmin:detailansicht_dokument' projekt.id dokument_m.id %}">{{dokument_m.bezeichnung}}</a>
                            </td>
                            <td>{{dokument_m.zeitstempel}}</td>
                            <td>{{dokument_m.status}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% endif %}
    </div>

</div>
{% endblock inhalt %}