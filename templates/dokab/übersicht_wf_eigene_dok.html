<!-- Vererbung -->
{% extends './_base_dokab.html' %}

<!-- Titel -->
{% block titel %}
    Übersicht Workflows Eigene Dok
{% endblock titel %}

<!-- nav-tab aktiv -->
{% block wf_eigene_dok_active %}
    active
{% endblock wf_eigene_dok_active %}

<!-- Seiteninhalt -->
{% block inhalt %}
<div class="container">

    <!-- Seitenüberschrift -->
    <h1 class="mb-5 text-center">Übersicht Workflows Eigene Dokumente</h1>

    <!-- Auflistung Workflows Eigene Dokumente -->
    {% for workflow in liste_workflows %}
    <ul class="my-3 list-group">

        <!-- WF Bezeichnung Dokument -->
        <li class="list-group-item font-weight-bolder" style="background-color: #f8f9fa;">
            <span class="border-bottom">Dokument: {{workflow.dokument.bezeichnung}}</span><br>
            WF-Schema: {{workflow.workflowschema.bezeichnung}}<br>
            WF-Status: {{workflow.status.bezeichnung}}
        </li>

        <!-- WF Stufen -->
        {% for wf_stufe in workflow.liste_wf_stufen %}
        <li class="list-group-item" {% if wf_stufe.dict_stufenstatus.bezeichnung == 'Warten auf Vorstufe' %}style="color: lightgrey;"{% endif %}>
            
            <div class="d-flex flex-row">
                <div class="p-2 flex-grow-1 font-weight-bolder">Stufe {{forloop.counter}}: {{wf_stufe.bezeichnung}}
                    (
                    <span style="color: 
                    {% if wf_stufe.dict_stufenstatus.bezeichnung == 'Freigegeben' %}green;
                    {% elif  wf_stufe.dict_stufenstatus.bezeichnung == 'Abgelehnt' %}red;
                    {% endif %}">
                    {{wf_stufe.dict_stufenstatus.bezeichnung}}
                    </span>
                    )
                </div>
            </div>

            <!-- Auflistung Prüffirmen -->
            <ul class="mb-2">
                {% for prüffirma in wf_stufe.liste_prüffirmen %}
                <li>
                    {{prüffirma.bezeichnung}}: 
                    <span style="color: 
                    {% if prüffirma.firmenstatus.bezeichnung == 'Freigegeben' %}green;
                    {% elif  prüffirma.firmenstatus.bezeichnung == 'Abgelehnt' %}red;
                    {% endif %}">
                    {{prüffirma.firmenstatus.bezeichnung}}
                    </span>
                </li>
                {% endfor %}
            </ul>

        </li>
        {% endfor %}

    </ul>
    {% endfor %}

</div>
{% endblock inhalt %}